# Configuration du client

Fichier snmp.conf -> Configuration des param√®tres globaux pour les outils SNMP  
Fichier snmpd.conf -> Configuration des diff√©rents outils snmp comme le d√©mon snmpd

## Configuration du fichier /etc/snmp/snmp.conf
Ce fichier nous permet de centraliser les param√®tres qu'utiliseront les outils SNMP, comme la communaut√©, la version de SNMP, les MIBs ou le format de sortie. Une fois ces param√®tres renseign√©s, il ne vous sera plus n√©cessaire de les mentionner quand vous ex√©cut√©rez un snmpget par exemple.

> Je vous recomande de d√©finir:
> - la communaut√©
> - la version snmp
> - une MIB standard (IF-MIB et SNMPv2-MIB par exemple)

Je vous laisse jeter un oeil au fichier snmp.conf de ce d√©pot et choisir les options que vous souhaitez configurer.
Notez toute fois que ces param√®tres peuvent supplant√© en utilisant les options en ligne de commandes.

## Configuration de /etc/snmp/snmpd.conf
Ce fichier d√©di√© √† la configuration du d√©mon snmpd  

Au minimum votre fichier snmp.conf devra contenir:  
Facultatif si d√©ja renseign√© dans le fichier snmp.conf:
 - `agentAddress udp:161,udp6:[::1]:161`

Obligatoire:  
 - `rocommunity  public default` 
 - `rocommunity6 public default`

Faite les modifications n√©cessaires  
``` shell
sudo nano /etc/snmp/snmpd.conf
```

Red√©marrez le service SNMPD et v√©rifiez son status
``` shell
sudo systemctl restart snmpd
sudo systemctl status snmpd
```
![image](https://github.com/ornech/SNMP/assets/101867500/186352e8-4f07-4b9f-937b-3bd780c0a027)

V√©rifiez que le port 161 soit √† l'√©coute des toutes les adresses r√©seaux :
``` shell
sudo netstat -tulpn
```
Vous devriez voir ces lignes. Indique que daemon snmpd est maintenant a l'√©coute sur le port 161 sur les r√©seaux IPv4 et IPv6;
``` shell
udp        0      0 0.0.0.0:161             0.0.0.0:*                           123863/snmpd        
udp6       0      0 ::1:161                 :::*                                123863/snmpd  
```
Affichez la MIB du client  
``` shell
snmpwalk -c public -v 2c localhost
```

Relancez swmpwalk en supprimant les parma√®tres de communaut√© et version de snmp. On v√©rifiera ainsi que ces param√®tres proviennent cette fois du fichier snmp.conf.
``` shell
snmpwalk localhost
```

## Testez la communication entre votre agent et le manager
Depuis le client  
``` shell
snmpstatus -c public <IP DU MANAGER>
```

Depuis le manager  
``` shell
snmpstatus -c public <IP DU CLIENT>
```
# Depuis l'interface Zabbix
## Cr√©ez un hote
 1. Depuis le menu de gauche, s√©letionnez "Surveillance" -> "H√¥te"
 2. Cliquez sur le bouton "Cr√©er un h√¥te" (compl√®tement en haut √† droite) ![image](https://github.com/ornech/Supervision-zabbix/assets/101867500/35cb1694-f611-429c-88a4-82ba86297e26)
 3. Renseignez les champs "Nom de l'h√¥te", "Groupes"
 4. Ajouter une interface SNMP (l'IP √©tant celle de votre client SNMP) ![image](https://github.com/ornech/Supervision-zabbix/assets/101867500/70070581-f216-40b4-b7c6-0ee605a56ebb)


## Cr√©er un √©l√©ment (item)

Doc: https://www.zabbix.com/documentation/6.4/fr/manual/config/items/itemtypes/snmp?hl=SNMP

> :warning: L'interrogation d'un client (un GET) passe toujours par la transmission d'un OID. Vous devez donc trouver l'IOD correspondant √† ce que vous souhaitez monitorer. C'est l√† que les ennuis commencent ...
 
> üï∂Ô∏è: utiliser un navigateur d'OID comme [https://mibbrowser.online/](https://ireasoning.com/downloadmibbrowserfree.php)ireasoning browser
> ou https://www.oidview.com


