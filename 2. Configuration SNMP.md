# Configuration du client

Fichier snmp.conf -> Configuration des param√®tres globaux pour les outils SNMP 
Fichier snmpd.conf -> Configuration du d√©mon snmpd
Doc: https://www.zabbix.com/documentation/6.4/fr/manual/config/items/itemtypes/snmp?hl=SNMP

## Configuraiton du fichier /etc/snmp/snmp.conf
Ce fichier nous permettra de centraliser les param√®tres qu'utiliseront les outils SNMP, comme la communaut√©, la verion de SNMP, les MIBs ou le format de sortie. Une fois ces param√®tres renseing√©s dans le fichier snmp.conf, il ne sera plus n√©cessaire de les mentionner quand vous ex√©cut√©rez un snmpget par exemple.

Je vous laisse jeter un oeil au fichier snmp.conf de ce d√©pot et choisir les options que vous souhaitez configurer.

## Configuration de /etc/snmp/snmpd.conf
Ce fichier d√©di√© √† la configuration du d√©mon snmpd  

Au minimum votre fichier snmp.conf devra contenir:
 - `agentAddress udp:161,udp6:[::1]:161` 
 - `syslocation Mon_Serveur` Emplacement syst√®me (syslocation) :
 - `syscontact admin@mondomaine.lab` Un mail d'adminsitrateur
 - `rocommunity  public default`
   
Faite les modifications n√©cessaires  
``` shell
sudo nano /etc/snmp/snmpd.conf
```

Red√©marrez le service SNMPD et v√©rifiez son status
``` shell
sudo systemctl restart snmpd
sudo systemctl status snmpd
```

V√©rifiez que le port 161 soit √† l'√©coute :
``` shell
sudo netstat -tulpn
```
Vous devriez voir ces lignes. Indique que daemon snmpd est maintenant a l'√©coute sur le port 161 sur les r√©seaux IPv4 et IPv6;
``` shell
udp        0      0 0.0.0.0:161             0.0.0.0:*                           123863/snmpd        
udp6       0      0 ::1:161                 :::*                                123863/snmpd  
```
Affichez la MIB du client  
``` shell
snmpwalk -c public -v 2c localhost
```

## Testez la communication entre votre agent et le manager
Depuis le client  
``` shell
snmpstatus -c public <IP DU MANAGER>
```

Depuis le manager  
``` shell
snmpstatus -c public <IP DU CLIENT>
```
# Depuis l'interface Zabbix
## Cr√©ez un hote
 1. Depuis le menu de gauche, s√©letionnez "Surveillance" -> "H√¥te"
 2. Cliquez sur le bouton "Cr√©er un h√¥te" (compl√®tement en haut √† droite) ![image](https://github.com/ornech/Supervision-zabbix/assets/101867500/35cb1694-f611-429c-88a4-82ba86297e26)
 3. Renseignez les champs "Nom de l'h√¥te", "Groupes"
 4. Ajouter une interface SNMP (l'IP √©tant celle de votre client SNMP) ![image](https://github.com/ornech/Supervision-zabbix/assets/101867500/70070581-f216-40b4-b7c6-0ee605a56ebb)


## Cr√©er un √©l√©ment (item)

> :warning: L'interrogation d'un client (un GET) passe toujours par la transmission d'un OID. Vous devez donc trouver l'IOD correspondant √† ce que vous souhaitez monitorer. C'est l√† que les ennuis commencent ...
 
> üï∂Ô∏è: utiliser un navigateur d'OID comme [https://mibbrowser.online/](https://ireasoning.com/downloadmibbrowserfree.php)ireasoning browser

